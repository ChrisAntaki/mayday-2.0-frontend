---
layout: default
title: Demo Scorecard
permalink: /legislator/
---

<div id="js-legislators"></div>

{% raw %}
<script id="talley_template" type="text/html">
<div class="col-md-{{ column_width }}">
  <div class="talley">
    <i class="fa fa-check-square-o"></i>
    {{name}}
  </div>
</div>
</script>
<script id="legislator_template" type="text/html">
<div class="dossier-page">
  <div class="top-line-left"></div>
  <div class="bottom-taper hidden-xs">
    <div class="triangle-up leg"></div>
  </div>
  <div class="homepage-panel dossier-star">
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <img class="bg-star" src={{ background_img }}>
    <div class="container page-open">
      <div class="row">
        <div class="col-md-8 col-xs-12 center-block text-center">
          <h1 class="lead-title">{{page_title}}</h1>
          <div class="dossier-img">
            <div class=""  alt="{{ name }} Headshot" style="background-image:url(https://theunitedstates.io/images/congress/225x275/{{ bioguide_id }}.jpg)"></div>
          </div>
        </div>
      </div>
      <div class="row leader-visible">
        <div class="col-md-8 center-block tallies no-gutter" id="js-tallies">
        {{ tallies_rendered }}
        </div>
      </div>
      <div class="row">
        <div class="col-md-5 col-xs-12 center-block text-center tail-message">
          <h2>{{ tail_message }}</h2>
        </div>
      </div>
      <div class="row">
        <div class="col-md-8 col-xs-12 center-block text-center">
          <a href="#" class="btn btn-md-wide btn-mini-share make-call">
            <i class="fa fa-phone"></i>
            Make the Call
          </a>
          <a class="btn btn-md-wide btn-mini-share twitter-small" href="" role="button">
            <i class="fa fa-twitter"></i>
          </a>
          <a class="btn btn-md-wide btn-mini-share facebook-small" href="" role="button">
            <i class="fa fa-facebook"></i>
          </a>
        </div>
      </div>
      <div class="row">
        <div class="col-md-7 col-xs-12 center-block text-center">
          <div class="talk-bubble">
            <p><strong>You could say:</strong></p>
            <p>{{ share_message }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <p class="text-center"><a href="/legislators" title="">View all Leaders for Fundamental Reform</a></p>

  <div class="bottom-line"></div>
</div>
</script>
{% endraw %}
<script>


  $( document ).ready( function(){
    "use strict";
    var bioguide_id = getParameterByName('bioguide_id'),
        status = '',
        tallies ='',
        tallie_columns;

    function getParameterByName( name ) {
      var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
          results = regex.exec(location.search);

      name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
      return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));

    }

    function scorecard( legislator_data ){

      var l_d = legislator_data;
      l_d.short_title = l_d.title === 'Senator' ? 'Sen.' : 'Rep.';
      l_d.title_name = [l_d.title,l_d.name].join(' ');
      l_d.bioguide_id = bioguide_id;

      if ( l_d.with_us === true ){
        l_d.tallies_rendered = ''
        status = true;

        if(l_d.current_sponsorships.length == 1){
          tallie_columns = '12'
        }else{
          tallie_columns = '6'

        }
        $.each(l_d.current_sponsorships, function(index, data){
          data.column_width = tallie_columns;
          tallies += ich.talley_template(data, true);
        })
        l_d.background_img = '/images/star_blue.svg';
        l_d.page_title = [l_d.title_name,'is a leader supporting fundamental reform of the way campaigns are funded.'].join(' ');
        l_d.support_message = 'some bill.';
        l_d.share_message = ['Hi. My name is _______. I\'m calling to thank',l_d.title_name,'for being a supporter of fundamental reform by supporting',l_d.support_message].join('');
        l_d.tail_message = ['Say Thanks',l_d.short_title,l_d.name].join(' ') + '!';
      } else {
        status = false;
        l_d.background_img = '/images/call-page/money_sign.svg';
        l_d.page_title = [l_d.title_name,'is not a leader supporting fundamental reform'].join(' ');
        l_d.share_message = ['Ask',l_d.title_name,'to become a leader for fundamental reform'].join(' ');
        l_d.tail_message = ['Tell',l_d.short_title,l_d.name, 'to Support Reform!'].join(' '); // TODO: user short title
      }


      var rendered = ich.legislator_template(l_d);

      if (status) {
        $(rendered["0"]).addClass("with-us-true");
      } else {
        $(rendered["0"]).addClass("with-us-false");
      }
       document.title = l_d.page_title
      $('#js-legislators').append(rendered);
      $('#js-tallies').append(tallies);
    }

    $.getJSON('{{site.services_url}}/legislators/'+bioguide_id, scorecard);
  });
</script>
