---
layout: default
title: legislators
permalink: /legislators/
---

<div class="container">
    <div class="row">
      <h1>Legislators</h1>
      <p>This is a functional demonstration. Goal is to make each legislator panel look like the tooltip on the map, with less copy. We'll also have buttons filter by Leader, potential leader and all reps</p>
      <form method="get" accept-charset="utf-8" class="md-inputs">
        <input id="search" class="form-control" name="search" placeholder="Search by name or state" type="text" data-list=".js-legislators">
      </form>
    </div>
    <div class="row no-gutter legislators-listing">
      <div id="js-legislators" class="js-legislators"></div>
    </div>
</div>

<script id="legislator_template" type="text/html">
{% raw %}

    <div class="col-md-4 col-sm-8 col-xs-12 bottom-margin with-us-{{with_us}}">
      <div class="col-md-4 col-sm-3 col-xs-4">
        <a href="/legislator/?bioguide_id={{bioguide_id}}"><div class="background-square"></div></a>
      </div>
      <div class="col-md-8 col-sm-6 col-xs-8 remove-padding-text">
        <h3 class="no-top-margin"> {{short_title}}<strong>{{ name }}</strong> </h3>
        <h4>({{ party }}-{{ state_abbrev }} {{display_district}})</h4>
        <a class="btn btn-targets story-grey" href="/legislator/?bioguide_id={{bioguide_id}}"><span class="stateface stateface-replace stateface-{{ lower_abbrev }}"></span> Read More</a>
      </div>
      <div class="hidden">
        {{state_name}}
      </div>
    </div>

{% endraw %}
</script>
<script src="/js/lib/jquery.hideseek.min.js" type="text/javascript" charset="utf-8"></script>
<script>
(function ( data ){
  $(document).ready(function(){
    $('#search').hideseek();

    "use strict";

    var newAllieData = data;
    var outSide = {};

    function renderAllies(legislator_data, index) {

      var rendered = [],
          bgIMG = 'url(' + legislator_data["image_url"] + ')';

      legislator_data.short_title = legislator_data.title === 'Senator' ? 'Sen.' : 'Rep.';
      legislator_data.lower_abbrev = legislator_data.state_abbrev.toLowerCase();

      rendered = ich.legislator_template(legislator_data);
      $(rendered["0"]).find("div.background-square").css("background-image", bgIMG);

      // if ( index % 3 === 0 ){
      //   $(rendered["0"]).addClass("remove-padding-photo");
      // } else if ( index === 1 ){ //adds verticallines the the middle article
      //   // $(rendered["0"]).addClass("verticalLines");
      //   $(rendered["0"]).addClass("remove-padding-photo-small");
      // } else {
      //   $(rendered["0"]).addClass("remove-padding-photo-small");
      // }

      $('#js-legislators').append(rendered);

    }

    function callDataAndTemplate(legislators) {
      var allyObject = [];

      legislators.forEach( function ( data, index ){ //gets three reps
          allyObject.push( data );
        });
      allyObject.map(renderAllies);
    }

    $.getJSON(newAllieData, callDataAndTemplate);

  });

})( '{{site.services_url}}/legislators/newest_supporters.json?limit=1000' );
















</script>